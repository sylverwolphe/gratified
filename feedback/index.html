
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
  <title>Gratified feedback</title>
      <link rel="icon" href="data:image/svg+xml,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 32 32&quot;><rect x=&quot;8&quot; y=&quot;8&quot; width=&quot;16&quot; height=&quot;16&quot; fill=&quot;%23722F37&quot; transform=&quot;rotate(45 16 16)&quot;/><rect x=&quot;10&quot; y=&quot;10&quot; width=&quot;12&quot; height=&quot;12&quot; fill=&quot;%23E8A317&quot; transform=&quot;rotate(45 16 16)&quot;/></svg>">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
    :root {
      --burgundy: #722F37;
      --gold: #E8A317;
      --teal: #2D5B69;
      --cream: #F7F3E9;
      --charcoal: #3C3C3C;
    }
    body {
      font-family: 'Amiri', serif;
      background: var(--cream);
      color: var(--charcoal);
      padding: 20px;
    }
    .container {
      max-width: 500px;
      margin: auto;
      background: white;
      border: 2px solid var(--gold);
      padding: 25px;
    }
    h1 {
      text-align: center;
      color: var(--burgundy);
      margin-bottom: 20px;
    }
    label {
      font-weight: 600;
      color: var(--burgundy);
      display: block;
      margin-bottom: 8px;
    }

    select, textarea, input[type="text"] {
      width: 100%;
      padding: 10px;
      border: 2px solid var(--gold);
      background: var(--cream);
      font-family: inherit;
      font-size: 16px;
      margin-bottom: 20px;
      box-sizing: border-box;
    }
    
    .stars {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-bottom: 20px;
    }
    .star {
      font-size: 30px;
      cursor: pointer;
      color: var(--gold);
      transition: transform 0.2s;
    }
    .star:hover, .star.selected {
      transform: scale(1.2);
      color: var(--burgundy);
    }
    button {
      width: 100%;
      background: var(--burgundy);
      color: var(--cream);
      border: none;
      padding: 15px;
      font-size: 18px;
      cursor: pointer;
    }
    button:hover { background: var(--teal); }
    .thankyou {
      display: none;
      text-align: center;
      padding: 20px;
      background: rgba(45,91,105,0.1);
      border: 2px solid var(--teal);
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>did you like your drink?</h1>
    <form id="feedbackForm">
      <label for="drink">which drink was it?</label>
      <select id="drink" name="drink" required>
        <option value="">Select one</option>
        <option value="pour over">pour over</option>
        <option value="espresso">espresso</option>
        <option value="americano">americano</option>
        <option value="latte">latte</option>
        <option value="affogato">affogato</option>
        <option value="matcha latte">matcha latte</option>
        <option value="spiced cacao">spiced cacao</option>
        <option value="moroccan mint tea">moroccan mint tea</option>
        <option value="kava">kava</option>
        <option value="pastry">pastry</option>
        <option value="other">other</option>
      </select>

      <label>rate 1-5</label>
      <div class="stars" id="stars">
        <span class="star" data-value="1">★</span>
        <span class="star" data-value="2">★</span>
        <span class="star" data-value="3">★</span>
        <span class="star" data-value="4">★</span>
        <span class="star" data-value="5">★</span>
      </div>

      <label for="comments">addt thoughts</label>
      <textarea id="comments" name="comments" rows="5" placeholder="well the drink was okay BUT LET ME TELL YOU ABOUT THE CHIHUAHUA BEHIND ME IN LINE AHHH..."></textarea>

      <label for="name">name</label>
      <input type="text" id="name" name="name" placeholder="(v optional)">

      <button type="submit">send</button>
    </form>

    <div class="thankyou" id="thankyou">
      <h2>thanks!!</h2>
      <p>>/o/</p>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>

  <script>
    // Your Firebase config (same as main site)
    const firebaseConfig = {
      apiKey: "AIzaSyCX9LqCG0G_zLFIii3hYQYpA5Cz3vXO1m8",
      authDomain: "gratifiedwegrow.firebaseapp.com",
      projectId: "gratifiedwegrow",
      storageBucket: "gratifiedwegrow.appspot.com",
      messagingSenderId: "620449599596",
      appId: "1:620449599596:web:4fcb7277f32cf636780849"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Star rating logic
    const stars = document.querySelectorAll('.star');
    let rating = 0;
    stars.forEach(star => {
      star.addEventListener('click', () => {
        rating = parseInt(star.dataset.value);
        stars.forEach(s => s.classList.remove('selected'));
        for (let i=0; i<rating; i++) stars[i].classList.add('selected');
      });
    });

    // Submit handler
    document.getElementById('feedbackForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const drink = document.getElementById('drink').value;
      const comments = document.getElementById('comments').value;
      const name = document.getElementById('name').value;

      try {
        await db.collection('feedback').add({
          drink,
          stars: rating,
          comments,
          name: name || null,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        document.getElementById('feedbackForm').style.display = 'none';
        document.getElementById('thankyou').style.display = 'block';
      } catch (err) {
        alert('Error saving feedback. Try again later.');
        console.error(err);
      }
    });
  </script>
</body>
</html>
